#name: Publish SNAPSHOT
#
#on:
#  push:
#    branches:
#      - develop
#      - main
#  workflow_dispatch:
#
#jobs:
#  publish-snapshot:
#    runs-on: ubuntu-latest
#    if: endsWith(github.event.repository.default_branch, 'SNAPSHOT')
#    
#    steps:
#      - name: Checkout code
#        uses: actions/checkout@v4
#
#      - name: Set up JDK 17
#        uses: actions/setup-java@v4
#        with:
#          java-version: '17'
#          distribution: 'temurin'
#          cache: 'gradle'
#
#      - name: Grant execute permission for gradlew
#        run: chmod +x gradlew
#
#      - name: Decode GPG key
#        run: |
#          mkdir -p ~/.gnupg/
#          echo "${{ secrets.GPG_PRIVATE_KEY }}" | base64 -d > ~/.gnupg/private-key.asc
#          gpg --batch --import ~/.gnupg/private-key.asc
#          rm ~/.gnupg/private-key.asc
#
#      - name: Publish SNAPSHOT
#        env:
#          OSSRH_USERNAME: ${{ secrets.OSSRH_USERNAME }}
#          OSSRH_PASSWORD: ${{ secrets.OSSRH_PASSWORD }}
#          GPG_PRIVATE_KEY: ${{ secrets.GPG_PRIVATE_KEY }}
#          GPG_PASSPHRASE: ${{ secrets.GPG_PASSPHRASE }}
#        run: ./gradlew publishToSonatype --no-daemon --stacktrace
#
#      - name: Cleanup
#        if: always()
#        run: |
#          rm -rf ~/.gnupg
#          ./gradlew --stop